<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>DICOM to JPG/PNG - SIIM Hackathon Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "DICOM to JPG/PNG";
        var mkdocs_page_input_path = "apis/dicom-to-jpg-png.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> SIIM Hackathon Documentation
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting-started/hackathon-event/">Hackathon Event</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting-started/hackathon-server/">Hackathon Server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting-started/mod-header/">ModHeader</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting-started/slack/">Slack</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">What's new</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../whats-new/2024/">2024</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../whats-new/2023/">2023</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../whats-new/2022/">2022</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../whats-new/2021/">2021</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">APIs</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../fhir-intro/">FHIR Intro</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fhircast-and-cds-hooks/">FHIR-related Technologies</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dicom-web-intro/">DICOMweb Intro</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dicom-web-stow/">DICOMweb STOW</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">DICOM to JPG/PNG</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1-extracting-jpgpng-via-dicomweb">1. Extracting JPG/PNG Via DICOMweb</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#dicomweb-example">DICOMweb Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-extracting-jpgpng-via-command-line-interface-cli-utilities">2. Extracting JPG/PNG Via Command-Line Interface (CLI) Utilities</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#cli-example">CLI Example</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../generative-ai/">Generative AI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ethereum-blockchain-intro/">Ethereum Intro</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../other-apis-and-standards/">Other APIs/Standards</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Miscellaneous</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../miscellaneous/data-sets/">Data Sets</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../miscellaneous/contributing/">Contributing</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">SIIM Hackathon Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">APIs</li>
      <li class="breadcrumb-item active">DICOM to JPG/PNG</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/ImagingInformatics/hackathon-docs/edit/main/apis/dicom-to-jpg-png.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="how-to-extract-a-jpg-or-png-from-a-dicom-image">How To Extract a JPG or PNG from a DICOM Image</h1>
<h2 id="introduction">Introduction</h2>
<p>A DICOM Image is a container, which combines a header (metadata like patient ID, study date, etc) with pixel data (i.e. the image itself). The latter may be uncompressed (i.e. bitmap) or compressed with one of the many codecs suported by the DICOM standard, such as JPEG-LS or High-Throughput JPEG 2000 (HTJ2K). </p>
<p>To process pixels, it may be easier to extract the pixel data into a simple JPG or PNG file. Two methods are described here: 1) DICOMweb and 2) Command-line utilities. Code/scripting using a DICOM library would also work, but that's out of scope for this article.</p>
<p>If you'd like to dig deeper into this topic, see the following links into the DICOM standard:</p>
<ol>
<li><a href="https://dicom.nema.org/medical/dicom/current/output/chtml/part18/sect_10.4.html#sect_10.4.1.1.3">Rendered Resources</a></li>
<li><a href="https://dicom.nema.org/medical/dicom/current/output/chtml/part18/sect_8.3.5.html#sect_8.3.5.1">Query Parameters For Rendered Resources</a></li>
<li><a href="https://dicom.nema.org/medical/dicom/current/output/chtml/part18/sect_8.7.4.html">Rendered Media Types</a></li>
</ol>
<p><em>Note:</em> Not all DICOM objects contain pixel data. Some are purely metadata, like Structured Reports (SR) and Key Object Selections (KOS).</p>
<h3 id="1-extracting-jpgpng-via-dicomweb">1. Extracting JPG/PNG Via DICOMweb</h3>
<p>Check your server's DICOM conformance statement to ensure it supports the <code>/rendered</code> call in WADO-RS. See the <a href="https://www.dicomstandard.org/using/dicomweb/retrieve-wado-rs-and-wado-uri">DICOM standard</a> for more details. We use <a href="https://www.orthanc-server.com/">Orthanc</a> and know that it supports this call.</p>
<p>If your server supports this endpoint, then the rest is easy! You can just set a <code>GET</code> call using the following URL format (replace the UIDs in curly brackets with the values you're working with):</p>
<pre><code>/studies/{Study Instance UID}/series/{Series Instance UID}/instances/{SOP Instance UID}/rendered
</code></pre>
<p>and add an <code>Accept</code> header with either <code>image/jpeg</code> or <code>image/png</code> depending on what you want, and that should be all!</p>
<h4 id="dicomweb-example">DICOMweb Example</h4>
<p>Here's a working example from the <a href="../../getting-started/hackathon-server/">SIIM Hackathon Server</a>. It required a valid hackathon API key:</p>
<pre><code>https://hackathon.siim.org/dicomweb/studies/1.3.6.1.4.1.14519.5.2.1.6279.6001.300027087262813745730072134723/series/1.3.6.1.4.1.14519.5.2.1.6279.6001.513114548408601984123939083099/instances/1.3.6.1.4.1.14519.5.2.1.6279.6001.197993217821785409800235232773/rendered
</code></pre>
<p>By default, Orthanc returns a JPEG image, but you can change that with:</p>
<pre><code>Accept: image/png
</code></pre>
<p>You can try this via tools like <a href="https://www.postman.com/">Postman</a>, <a href="https://insomnia.rest/">Insomnia</a>, etc.</p>
<h3 id="2-extracting-jpgpng-via-command-line-interface-cli-utilities">2. Extracting JPG/PNG Via Command-Line Interface (CLI) Utilities</h3>
<p>For this, we'll be using the excellent <a href="https://web.dcm4che.org/dcm4che-utilities">dcm4che CLI toolkit</a>. This toolkit works on Windows, Mac and Linux (even headless servers). You can download the latest and greatest verion of dcm4che <a href="https://sourceforge.net/projects/dcm4che/files/dcm4che3/">here</a> (you'll want to download the file ending with <code>-bin.zip</code>).</p>
<p>Once downloaded, you can run <code>dcm2jpg</code> and point it to a DICOM file to export the pixel data like so:</p>
<pre><code>./dcm4che-5.23.2/bin/dcm2jpg /path/to/dicom-file.dcm
</code></pre>
<p>Find more information on dcm2jpg <a href="https://github.com/dcm4che/dcm4che/blob/master/dcm4che-tool/dcm4che-tool-dcm2jpg/README.md">here</a> or by running <code>dcm2jpg --help</code></p>
<p><em>Note:</em> Other DICOM toolkits have support for this as well. See the <a href="https://support.dcmtk.org/docs/dcmj2pnm.html">dcmtk equivalent</a>.</p>
<h4 id="cli-example">CLI Example</h4>
<p>Assuming you have both dcm4che and this <a href="https://github.com/ImagingInformatics/hackathon-images/blob/master/Ravi%20SIIM/W_Chest_PA_3172/IM-0031-0001.dcm">sample hackathon image</a> downloaded to the current folder (and dcm4che unzipped). You can run the following to export to JPEG:</p>
<pre><code>./dcm4che-5.23.2/bin/dcm2jpg IM-0031-0001.dcm IM-0031-0001.jpg
</code></pre>
<p>Or, the following to go with PNG instead:</p>
<pre><code>./dcm4che-5.23.2/bin/dcm2jpg -F PNG IM-0031-0001.dcm IM-0031-0001.jpg
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../dicom-web-stow/" class="btn btn-neutral float-left" title="DICOMweb STOW"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../generative-ai/" class="btn btn-neutral float-right" title="Generative AI">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ImagingInformatics/hackathon-docs/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../dicom-web-stow/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../generative-ai/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
